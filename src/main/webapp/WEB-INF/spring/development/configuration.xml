<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ @copyright (c) 2014, by Vitaliy Tsutsman
  ~
  ~ @author Vitaliy Tsutsman <vtsutsman@softjourn.com>
  -->

<beans
        xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd"
>

    <!--                                                                      -->
    <!-- Configuration for encryptor, based on environment variables.         -->
    <!--                                                                      -->
    <!-- In this example, the encryption password will be read from an        -->
    <!-- environment variable called "APP_ENCRYPTION_PASSWORD" which, once    -->
    <!-- the application has been started, could be safely unset.             -->
    <!--                                                                      -->
    <bean id="environmentVariablesConfiguration"
          class="org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig">
        <property name="algorithm" value="PBEWithMD5AndDES" />
        <property name="password" value="secret" />
    </bean>


    <!--                                                                      -->
    <!-- The will be the encryptor used for decrypting configuration values.  -->
    <!--                                                                      -->
    <bean id="configurationEncryptor"
          class="org.jasypt.encryption.pbe.StandardPBEStringEncryptor">
        <property name="config" ref="environmentVariablesConfiguration" />
    </bean>


    <!--                                                                      -->
    <!-- The EncryptablePropertyPlaceholderConfigurer will read the           -->
    <!-- .properties files and make their values accessible as ${var}.        -->
    <!--                                                                      -->
    <!-- Our "configurationEncryptor" bean (which implements                  -->
    <!-- org.jasypt.encryption.StringEncryptor) is set as a constructor arg.  -->
    <!--                                                                      -->
    <bean id="propertyConfigurer"
          class="org.jasypt.spring31.properties.EncryptablePropertyPlaceholderConfigurer">
        <constructor-arg ref="configurationEncryptor" />
        <property name="locations">
            <list>
                <value>classpath:/configuration/persistence.properties</value>
                <value>classpath:/configuration/mail.properties</value>
            </list>
        </property>

    </bean>

</beans>
